<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7. 오류 처리 | 2022-book-study</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/2022-book-study/assets/style.9407b1cf.css">
    <link rel="modulepreload" href="/2022-book-study/assets/app.7b36c640.js">
    <link rel="modulepreload" href="/2022-book-study/assets/CLEAN_CODE_Chapter_7.md.930b7dca.lean.js">
    
    <meta name="twitter:title" content="7. 오류 처리 | 2022-book-study">
  <meta property="og:title" content="7. 오류 처리 | 2022-book-study">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-22035cf8><div class="sidebar-button" data-v-22035cf8><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/2022-book-study/" aria-label="2022-book-study, back to home" data-v-22035cf8 data-v-6f1fa1d8><!----> 2022-book-study</a><div class="flex-grow" data-v-22035cf8></div><div class="nav" data-v-22035cf8><nav class="nav-links" data-v-22035cf8 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-928cb7a2><nav class="nav-links nav" data-v-928cb7a2 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-928cb7a2><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#오류-처리-기법">오류 처리 기법</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#오류-코드보다-예외를-사용하라">오류 코드보다 예외를 사용하라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#try-catch-finally-문부터-작성하라">try-catch-finally 문부터 작성하라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#unchecked-예외를-사용하라">Unchecked 예외를 사용하라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#의미-있는-예외를-던져라">의미 있는 예외를 던져라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#호출자-caller-를-고려해-예외-클래스를-정해라">호출자(Caller)를 고려해 예외 클래스를 정해라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#정상적인-흐름을-정의하라">정상적인 흐름을 정의하라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#예외-대신-null을-반환하지-마라">예외 대신 null을 반환하지 마라</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#함수의-인자로-null을-전달하지-마라">함수의 인자로 null을 전달하지 마라</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#conclusion">Conclusion</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-338937e7><div class="container" data-v-338937e7><!--[--><!--]--><div style="position:relative;" class="content" data-v-338937e7><div><h1 id="_7-오류-처리" tabindex="-1">7. 오류 처리 <a class="header-anchor" href="#_7-오류-처리" aria-hidden="true">#</a></h1><ul><li>오류 발생 가능성은 항상 존재</li><li>오류 처리 코드로 인해 프로그램 논리가 더러워져서는 안 됨</li></ul><h2 id="오류-처리-기법" tabindex="-1">오류 처리 기법 <a class="header-anchor" href="#오류-처리-기법" aria-hidden="true">#</a></h2><h3 id="오류-코드보다-예외를-사용하라" tabindex="-1">오류 코드보다 예외를 사용하라 <a class="header-anchor" href="#오류-코드보다-예외를-사용하라" aria-hidden="true">#</a></h3><ul><li>오류 코드를 던지는 경우, 항상 해당 함수 호출 시 오류 코드를 확인하는 로직을 사용해줘야 함</li><li>함수의 로직과 오류 처리 로직을 분리하라</li></ul><h3 id="try-catch-finally-문부터-작성하라" tabindex="-1"><code>try-catch-finally</code> 문부터 작성하라 <a class="header-anchor" href="#try-catch-finally-문부터-작성하라" aria-hidden="true">#</a></h3><ul><li>이 덕분에 트랜잭션과 같은 형태로 로직을 구성할 수 있게 된다</li><li>강제로 예외를 일으키는 Test case를 먼저 작성하는 것도 좋은 방법</li></ul><h3 id="unchecked-예외를-사용하라" tabindex="-1">Unchecked 예외를 사용하라 <a class="header-anchor" href="#unchecked-예외를-사용하라" aria-hidden="true">#</a></h3><ul><li>반드시 해당 예외를 처리해줘야 하는 Checked Exception을 사용하면... <ul><li>어떤 함수에서 새로운 Checked Exception을 throw 한다고 해보자</li><li>그럼 이 함수를 사용하는 모든 곳에서 새로운 Checked Exception을 처리해줘야 하는 로직을 추가해줘야 함</li></ul></li><li>다시말해, Check Exception은 함수를 사용할 때 내부 구현까지 모두 알아야 하기에 OCP(Open-Closed Principle) 위반</li></ul><h3 id="의미-있는-예외를-던져라" tabindex="-1">의미 있는 예외를 던져라 <a class="header-anchor" href="#의미-있는-예외를-던져라" aria-hidden="true">#</a></h3><ul><li>발생된 예외를 통해 원인과 위치를 찾을 수 있도록 하라</li><li>실패한 연산 이름과 실패 유형도 같이 언급</li></ul><h3 id="호출자-caller-를-고려해-예외-클래스를-정해라" tabindex="-1">호출자(Caller)를 고려해 예외 클래스를 정해라 <a class="header-anchor" href="#호출자-caller-를-고려해-예외-클래스를-정해라" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token comment">// bad</span>
<span class="token class-name">Port</span> port <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Port</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  port<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DeviceResponseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">reportError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnlockedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">reportError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DeviceRejectException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">reportError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java"><pre><code><span class="token comment">// good</span>
<span class="token class-name">Port</span> port <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Port</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  port<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PortFailure</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">reportError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>유사한 의미의 예외는 한 번에 묶어 throw 하자 <ul><li>가령 위에서는 <strong>서로 비슷한 의미를 가져 유사한 처리 로직을 갖는</strong> <code>DeviceResponseException</code>, <code>UnlockedException</code>, <code>DeviceRejectException</code>이 있음</li><li>이를 <code>PortFailure</code>라는 예외 하나만 해당 함수에서 던지도록 하면 Caller의 예외 처리 로직이 매우 간결해짐</li><li>이를 위해 Callee 내부에서 예외를 Wrapping 하던가 할 수 있겠지</li></ul></li></ul><h3 id="정상적인-흐름을-정의하라" tabindex="-1">정상적인 흐름을 정의하라 <a class="header-anchor" href="#정상적인-흐름을-정의하라" aria-hidden="true">#</a></h3><div class="language-ts"><pre><code><span class="token comment">// bad</span>
<span class="token keyword">let</span> myCosts <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// 한 사람이 모두 계산</span>
  myCosts <span class="token operator">+=</span> expenses<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  <span class="token comment">// 각자 계산</span>
  myCosts <span class="token operator">+=</span> expenses<span class="token punctuation">.</span><span class="token function">getTotalByOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts"><pre><code><span class="token comment">// good</span>
<span class="token keyword">let</span> myCosts <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
myCosts <span class="token operator">+=</span> expenses<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// expenses 내부에서 알아서 처리</span>
</code></pre></div><ul><li>정말 필요한 경우에만 예외를 던지도록 하라</li><li>예외 처리 로직으로 인해 Caller의 코드가 더러워 질 수도 있다</li></ul><h3 id="예외-대신-null을-반환하지-마라" tabindex="-1">예외 대신 <code>null</code>을 반환하지 마라 <a class="header-anchor" href="#예외-대신-null을-반환하지-마라" aria-hidden="true">#</a></h3><ul><li>오류 발생을 Exception이 아닌 <code>null</code>을 반환하는 것으로 처리한다면? <ul><li>묵시적인(Implicit) 예외 처리 로직이 필요하기에 이는 좋지 않음</li><li>예외 처리를 깜빡해버릴 수 있다는 것이다</li></ul></li></ul><h3 id="함수의-인자로-null을-전달하지-마라" tabindex="-1">함수의 인자로 <code>null</code>을 전달하지 마라 <a class="header-anchor" href="#함수의-인자로-null을-전달하지-마라" aria-hidden="true">#</a></h3><ul><li>사용하는 함수(Callee) 내부에서 <code>null</code>을 처리하는 로직이 존재하지 않는다면 이는 바로 runtime error가 되어버림</li><li>물론 실제로 필요한 경우도 있긴 한데, 웬만하면 <code>null</code>에 의미를 부여하지 말라는 것</li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-hidden="true">#</a></h2><ul><li>깨끗한 코드는 가독성도 좋아야 하지만, 무엇보다 안정성도 높아야 함</li></ul></div></div><footer class="page-footer" data-v-338937e7 data-v-4b207065><div class="edit" data-v-4b207065><div class="edit-link" data-v-4b207065 data-v-76b066b8><!----></div></div><div class="updated" data-v-4b207065><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"clean_code_chapter_1.md\":\"45843a24\",\"clean_code_chapter_2.md\":\"4f5f6566\",\"clean_code_chapter_3.md\":\"d30ff7b0\",\"clean_code_chapter_4.md\":\"a81dffc4\",\"clean_code_chapter_5.md\":\"c67c3350\",\"clean_code_chapter_6.md\":\"5286d8d0\",\"clean_code_chapter_7.md\":\"930b7dca\",\"clean_code_chapter_8.md\":\"f42a0052\",\"clean_code_index.md\":\"3a124e13\",\"readme.md\":\"ccd03e62\",\"index.md\":\"855344a5\"}")</script>
    <script type="module" async src="/2022-book-study/assets/app.7b36c640.js"></script>
    
  </body>
</html>