<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3. 함수 | 2022-book-study</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/2022-book-study/assets/style.9407b1cf.css">
    <link rel="modulepreload" href="/2022-book-study/assets/app.7b36c640.js">
    <link rel="modulepreload" href="/2022-book-study/assets/CLEAN_CODE_Chapter_3.md.d30ff7b0.lean.js">
    
    <meta name="twitter:title" content="3. 함수 | 2022-book-study">
  <meta property="og:title" content="3. 함수 | 2022-book-study">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-22035cf8><div class="sidebar-button" data-v-22035cf8><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/2022-book-study/" aria-label="2022-book-study, back to home" data-v-22035cf8 data-v-6f1fa1d8><!----> 2022-book-study</a><div class="flex-grow" data-v-22035cf8></div><div class="nav" data-v-22035cf8><nav class="nav-links" data-v-22035cf8 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-928cb7a2><nav class="nav-links nav" data-v-928cb7a2 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-928cb7a2><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#함수-작성-가이드라인">함수 작성 가이드라인</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#작게-만들어라">작게 만들어라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#한-가지만-해라">한 가지만 해라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#함수-당-추상화-수준은-하나로">함수 당 추상화 수준은 하나로!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#서술적인-이름을-사용하라">서술적인 이름을 사용하라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#함수-인수-argument-를-적게-사용하라">함수 인수(Argument)를 적게 사용하라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#side-effects를-일으키지-말아라">Side-Effects를 일으키지 말아라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#명령과-조회를-분리하라">명령과 조회를 분리하라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#오류-코드보다-예외를-사용하라">오류 코드보다 예외를 사용하라!</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#반복하지-마라">반복하지 마라!</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#함수를-작성하는-방법">함수를 작성하는 방법</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-338937e7><div class="container" data-v-338937e7><!--[--><!--]--><div style="position:relative;" class="content" data-v-338937e7><div><h1 id="_3-함수" tabindex="-1">3. 함수 <a class="header-anchor" href="#_3-함수" aria-hidden="true">#</a></h1><p>아래 코드는 함수의 <strong>나쁜</strong> 예.</p><div class="language-ts"><pre><code><span class="token comment">// code 1</span>

<span class="token keyword">const</span> testableHtml <span class="token operator">=</span> <span class="token punctuation">(</span>
  pageData<span class="token operator">:</span> PageData<span class="token punctuation">,</span>
  includeSuiteSetup<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wikiPage<span class="token operator">:</span> WikiPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">getWikiPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buffer<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;Test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>includeSuiteSetup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> suiteSetup<span class="token operator">:</span> WikiPage <span class="token operator">=</span> PageCrawlerImpl<span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span>
        SuiteResponder<span class="token punctuation">.</span><span class="token constant">SUITE_SETUP_NAME</span><span class="token punctuation">,</span>
        wikiPage<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>suiteSetup <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> pagePath<span class="token operator">:</span> WikiPagePath <span class="token operator">=</span> suiteSetup<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>suiteSetup<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> pagePathName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> PathParser<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>pagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span>
          <span class="token string">&#39;!include -setup .&#39;</span><span class="token punctuation">,</span>
          pagePathName<span class="token punctuation">,</span>
          <span class="token string">&#39;\n&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> setup<span class="token operator">:</span> WikiPage <span class="token operator">=</span> PageCrawlerImpl<span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span><span class="token string">&#39;SetUp&#39;</span><span class="token punctuation">,</span> wikiPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>setup <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> setupPath<span class="token operator">:</span> WikiPagePath <span class="token operator">=</span> wikiPage<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getFullPath9setup<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> setupPathName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> PathParser<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>setupPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span>
        <span class="token string">&#39;!include -setup .&#39;</span><span class="token punctuation">,</span>
        setupPathName<span class="token punctuation">,</span>
        <span class="token string">&#39;\n&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;Test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> teardown<span class="token operator">:</span> WikiPage <span class="token operator">=</span> PageCrawlerImpl<span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span><span class="token string">&#39;TearDown&#39;</span><span class="token punctuation">,</span> wikiPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>teardown <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> teardownPath<span class="token operator">:</span> WikiPagePath <span class="token operator">=</span> wikiPage<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>teardown<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> teardownPathName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> PathParser<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>teardownPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span>
        <span class="token string">&#39;!include -teardown .&#39;</span><span class="token punctuation">,</span>
        teardownPathName<span class="token punctuation">,</span>
        <span class="token string">&#39;\n&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>includeSuiteSetup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> suiteTeardown<span class="token operator">:</span> WikiPage <span class="token operator">=</span> PageCrawlerImpl<span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span>
        SuiteResponder<span class="token punctuation">.</span><span class="token constant">SUITE_TEARDOWN_NAME</span><span class="token punctuation">,</span>
        wikiPage<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>suiteTeardown <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> pagePath<span class="token operator">:</span> WikiPagePath <span class="token operator">=</span> suiteTeardown<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>suiteTeardown<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> pagePathName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> PathParser<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>pagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span>
          <span class="token string">&#39;!include -teardown .&#39;</span><span class="token punctuation">,</span>
          pagePathName<span class="token punctuation">,</span>
          <span class="token string">&#39;\n&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  pageData<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> pageData<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>문제점은 이렇다.</p><ul><li>다양한 추상화 수준(Level)</li><li>긴 함수의 코드</li><li>명확하지 않은 플래그(<code>includeSuiteSetup</code>, ...)</li><li>알 수 없는 문자열(<code>!include</code>)</li><li>예측되지 않는 함수를 사용(<code>getInheritedPage</code>, <code>getPageCrawler</code> ...)</li></ul><p>이 코드의 의미를 대략적으로 유추할 수는 있겠으나, 상기된 문제점들로 인해 실행하기 전 까지는 그것이 실제 로직과 동일한지 알기가 매우 어렵다.</p><p>위 코드는 아래와 같이도 표현이 가능하다.</p><div class="language-ts"><pre><code><span class="token comment">// code 2</span>

<span class="token keyword">const</span> renderPageWithSetupsAndTeardowns <span class="token operator">=</span> <span class="token punctuation">(</span>
  pageData<span class="token operator">:</span> PageData<span class="token punctuation">,</span>
  isSuite<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isTestPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;Test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isTestPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> testPage<span class="token operator">:</span> WikiPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">getWikiPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> newPageContent<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token function">includeSetupPage</span><span class="token punctuation">(</span>testPage<span class="token punctuation">,</span> newPageContent<span class="token punctuation">,</span> isSuite<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newPageContent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">includeTeardownPages</span><span class="token punctuation">(</span>testPage<span class="token punctuation">,</span> newPageContent<span class="token punctuation">,</span> isSuite<span class="token punctuation">)</span><span class="token punctuation">;</span>

    pageData<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>newPageContent<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> pageData<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이 코드는 <em>code 1</em> 보다 매우 간결하며, 또 그 의미를 유추하기도 더 쉽다. 또한 이름이 명확한 함수로 각 로직이 나뉘어져 있기에, 실제 동작 또한 유추된 의미와 동일할 것임을 쉽게 알 수 있다.</p><p>이게 어떻게 가능했을까?</p><h2 id="함수-작성-가이드라인" tabindex="-1">함수 작성 가이드라인 <a class="header-anchor" href="#함수-작성-가이드라인" aria-hidden="true">#</a></h2><ul><li>작게 만들어라!</li><li>한 가지만 해라!</li><li>함수 당 추상화 수준은 하나로!</li><li>서술적인 이름을 사용하라!</li><li>함수 인수를 적게 사용하라!</li><li>Side-Effects를 일으키지 말아라!</li><li>명령과 조회를 분리하라!</li><li>오류 코드보다 예외를 사용하라!</li><li>반복하지 마라!</li></ul><h3 id="작게-만들어라" tabindex="-1">작게 만들어라! <a class="header-anchor" href="#작게-만들어라" aria-hidden="true">#</a></h3><ul><li>중첩된 if/else 또는 while문을 사용할 정도로 함수가 길어져서는 안된다</li></ul><h3 id="한-가지만-해라" tabindex="-1">한 가지만 해라! <a class="header-anchor" href="#한-가지만-해라" aria-hidden="true">#</a></h3><blockquote><p>함수는 한 가지 일만을 해야 하며, 그것을 잘 해야 한다.</p></blockquote><ul><li>하나의 함수는 추상화 수준이 한 단계로 통일되어 있어야 한다.</li><li>어떤 로직이 하나의 함수로 추출될 수 있다면 그 로직을 포함하는 함수는 추상화 수준이 여러개인 것이다.</li></ul><h3 id="함수-당-추상화-수준은-하나로" tabindex="-1">함수 당 추상화 수준은 하나로! <a class="header-anchor" href="#함수-당-추상화-수준은-하나로" aria-hidden="true">#</a></h3><blockquote><p><em>code 1</em> 은 여러 추상화 수준이 뒤섞인 코드라고 할 수 있고, <em>coded 2</em> 는 하나의 추상화 수준만이 기술된 함수라고 할 수 있다.</p></blockquote><ul><li>한 함수 내 추상화 수준을 섞으면 가독성이 매우 떨어지게 된다.</li><li>함수는 위에서 아래로 자연스럽게 이야기처럼 읽혀야 좋다.</li></ul><p>다만 <code>switch</code> 또는 여러 <code>if/else</code>가 이어지는 구문은 이를 지키기 어렵다.</p><div class="language-ts"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">calculatePay</span> <span class="token operator">=</span> <span class="token punctuation">(</span>employee<span class="token operator">:</span> Employee<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">COMMISSIONED</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">calculateCommissionedPay</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">HOURLY</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">calculateHourlyPay</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">SALARIED</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">calculateSalariedPay</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>위 코드는 SRP(Single Responsibility Principle)과 OCP(Open Closed Principle) 둘 다 위반한다. 웬만하면 지양하도록 한다.</p><h3 id="서술적인-이름을-사용하라" tabindex="-1">서술적인 이름을 사용하라! <a class="header-anchor" href="#서술적인-이름을-사용하라" aria-hidden="true">#</a></h3><blockquote><p><em>code 1</em> 의 <code>testableHtml</code>이라는 이름의 함수를 <em>code 2</em> 에서 <code>renderPageWithSetupsAndTeardowns</code> 이름으로 바꾸어주었다.</p></blockquote><ul><li>코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행하도록 한다.</li><li>이름이 길어도, 정하느라 시간을 들여도 괜찮다.</li><li>모듈 내에서 함수 이름은 같은 문구, 명사, 동사를 사용해 도메인을 통일하도록 한다.</li></ul><h3 id="함수-인수-argument-를-적게-사용하라" tabindex="-1">함수 인수(Argument)를 적게 사용하라! <a class="header-anchor" href="#함수-인수-argument-를-적게-사용하라" aria-hidden="true">#</a></h3><ul><li>인수가 많을아질수록 함수의 가독성이 떨어지며 테스트 또한 어려워진다.</li><li>인수를 하나만 전달하는 단항 형식 함수 예 <ul><li>인수에 질문을 던지는 경우 (<code>fileExists(path: string) =&gt; boolean</code>)</li><li>인수를 변환해 결과를 반환하는 경우 (<code>fileOpen(path: string) =&gt; InputStream</code>)</li><li>가능한 인수를 수정하는 것을 피하고, 위 두 경우가 아니라면 단항 함수는 사용하지 않는다.</li></ul></li><li>인수를 두 개 전달하는 이항 함수 (또는 삼항 함수) <ul><li>Coord와 같이 자연적인 경우가 아니라면 인자가 두 개 이상인 함수는 순서를 기억해야 하기에 좋지 않다.</li><li>인자가 두 개 이상인 함수는 가능한 단항 함수로 만들자.</li></ul></li><li>플래그 인수는 함수 내에서 두 가지 이상을 처리하겠다는 의미를 가지기에, 이를 사용하기보다 각 로직을 함수로 나눈다.</li><li>인수를 의미 있는 데이터 타입으로 묶을 수 있는 경우 그렇게 한다. <ul><li>가령 <code>makeCircle(x: number, y: number, radius: number)</code>는 <code>makeCircle(center: Pointer, radius: number)</code>로 묶어줄 수 있다.</li></ul></li><li>인자를 함수 이름에 명시할 수도 있다. <ul><li>단항 함수: 동사/명사 쌍으로 표기 (write + field = <code>writeField(name)</code>)</li><li>이항 함수: 함수 이름에 키워드를 추가 (<code>assertEqual(expected, actual)</code> -&gt; <code>assertExpectedEqualsActual(expected, actual)</code>)</li></ul></li></ul><h3 id="side-effects를-일으키지-말아라" tabindex="-1">Side-Effects를 일으키지 말아라! <a class="header-anchor" href="#side-effects를-일으키지-말아라" aria-hidden="true">#</a></h3><ul><li>함수 내에서 부수 효과(Side-Effects)가 발생된다면, 이를 함수 이름에 명시하는 것이 좋다. <ul><li>e.g. 세션을 초기화 하는 코드가 있는 패스워드 체크용 함수라면 -&gt; <code>checkPasswordAndInitializeSession</code></li></ul></li><li>함수의 인수를 함부로 변경하지 않도록 한다.</li></ul><h3 id="명령과-조회를-분리하라" tabindex="-1">명령과 조회를 분리하라! <a class="header-anchor" href="#명령과-조회를-분리하라" aria-hidden="true">#</a></h3><div class="language-ts"><pre><code><span class="token comment">// bad: 하나의 함수에서 명령과 조회를 동시에 실행</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;user-1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts"><pre><code><span class="token comment">// good: 명령과 조회를 각기 다른 함수가 실행</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAttributeExists</span><span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;user-1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>함수는 무언가를 수행하거나 무언가를 답하거나 둘 중 하나만 한다. <ul><li>e.g. 객체 상태를 변경하거나, 객체 정보를 반환하거나</li></ul></li></ul><h3 id="오류-코드보다-예외를-사용하라" tabindex="-1">오류 코드보다 예외를 사용하라! <a class="header-anchor" href="#오류-코드보다-예외를-사용하라" aria-hidden="true">#</a></h3><div class="language-ts"><pre><code><span class="token comment">// bad: 하나의 함수에서 명령과 조회를 실행</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">deletePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">ERROR_OK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts"><pre><code><span class="token comment">// not-bad: 정상 로직과 오류 처리 로직이 뒤섞인 함수</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">deletePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// success logic...</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// error logic...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts"><pre><code><span class="token comment">// good: 오류 처리 로직을 함수로 분리</span>

<span class="token keyword">const</span> <span class="token function-variable function">tryDeletePage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>page<span class="token operator">:</span> Page<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">deletePageAndDoSomething</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">catchPageError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>오류 코드를 반환하는 방식은 명령/조회 규칙을 위반한다. <ul><li>오류 코드 대신 예외 처리(<code>try-catch</code>)를 하면 코드가 깔끔해진다.</li></ul></li><li>예외 처리는 정상 동작과 오류 처리 동작이 뒤섞이지 않도록 별도 함수로 뽑아낸다. <ul><li>예외 처리를 하는 함수는 <code>try</code> 키워드를 함께 사용하는것이 적절</li></ul></li></ul><h3 id="반복하지-마라" tabindex="-1">반복하지 마라! <a class="header-anchor" href="#반복하지-마라" aria-hidden="true">#</a></h3><ul><li>반복은 가독성을 크게 해친다.</li><li>동일한 알고리즘(로직)을 사용하는 경우 이를 하나의 함수로 분리해 한 곳에서만 정의되도록 한다.</li></ul><h2 id="함수를-작성하는-방법" tabindex="-1">함수를 작성하는 방법 <a class="header-anchor" href="#함수를-작성하는-방법" aria-hidden="true">#</a></h2><p>처음에는 길고 복잡해도 된다. 마치 글을 쓰듯 점진적으로 이를 다듬는 방식으로 진행해보자.</p><ol><li>함수의 초고(Draft)를 작성한다.</li><li>이 함수를 모두 커버하도록 단위 테스트를 작성한다.</li><li>위 가이드라인을 따라 함수를 다듬는다. 물론 테스트 역시 모두 통과.</li><li>최종적으로 깨끗한 함수가 만들어진다.</li></ol><p>이렇게 보면 시스템은 &#39;프로그램&#39;이 아니라 어쩌면 하나의 &#39;글&#39;이라 할 수도 있겠다. 정확한 언어(도메인)로 이야기를 잘 써 내려가보도록 하자.</p></div></div><footer class="page-footer" data-v-338937e7 data-v-4b207065><div class="edit" data-v-4b207065><div class="edit-link" data-v-4b207065 data-v-76b066b8><!----></div></div><div class="updated" data-v-4b207065><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"clean_code_chapter_1.md\":\"45843a24\",\"clean_code_chapter_2.md\":\"4f5f6566\",\"clean_code_chapter_3.md\":\"d30ff7b0\",\"clean_code_chapter_4.md\":\"a81dffc4\",\"clean_code_chapter_5.md\":\"c67c3350\",\"clean_code_chapter_6.md\":\"5286d8d0\",\"clean_code_index.md\":\"5c011f26\",\"readme.md\":\"0ed37571\",\"index.md\":\"855344a5\"}")</script>
    <script type="module" async src="/2022-book-study/assets/app.7b36c640.js"></script>
    
  </body>
</html>