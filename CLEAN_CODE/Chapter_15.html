<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 15 - JUnit | 2022-book-study</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/2022-book-study/assets/style.9407b1cf.css">
    <link rel="modulepreload" href="/2022-book-study/assets/app.7b36c640.js">
    <link rel="modulepreload" href="/2022-book-study/assets/CLEAN_CODE_Chapter_15.md.e0b0ed4a.lean.js">
    
    <meta name="twitter:title" content="Chapter 15 - JUnit | 2022-book-study">
  <meta property="og:title" content="Chapter 15 - JUnit | 2022-book-study">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-22035cf8><div class="sidebar-button" data-v-22035cf8><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/2022-book-study/" aria-label="2022-book-study, back to home" data-v-22035cf8 data-v-6f1fa1d8><!----> 2022-book-study</a><div class="flex-grow" data-v-22035cf8></div><div class="nav" data-v-22035cf8><nav class="nav-links" data-v-22035cf8 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-928cb7a2><nav class="nav-links nav" data-v-928cb7a2 data-v-32f7c87e><!--[--><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item active" href="/2022-book-study/CLEAN_CODE/" data-v-e307cbc6>Clean Code <!----></a></div></div><!--]--><!----><div class="item" data-v-32f7c87e><div class="nav-link" data-v-32f7c87e data-v-e307cbc6><a class="item isExternal" href="https://github.com//book-study-club/2022-book-study/" target="_blank" rel="noopener noreferrer" data-v-e307cbc6>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-e307cbc6><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-338937e7><div class="container" data-v-338937e7><!--[--><!--]--><div style="position:relative;" class="content" data-v-338937e7><div><h1 id="chapter-15-junit" tabindex="-1">Chapter 15 - JUnit <a class="header-anchor" href="#chapter-15-junit" aria-hidden="true">#</a></h1><p>JUnit은 자바의 유명한 프레임워크이다. 이 장에서는 JUnit 프레임워크에서 가져온 코드를 평가한다.</p><p>우리가 살펴볼 모듈은 문자열 비교 오류를 파악할 때 유용한 코드다. ComparisonCompactor라는 모듈로, 두 문자열을 받아 차이를 반환한다. 예를 들어, ABCDE와 ABXDE를 받아 &lt;…B[X]D…&gt;를 반환한다.</p><div class="language-java"><pre><code><span class="token keyword">package</span> <span class="token namespace">junit<span class="token punctuation">.</span>tests<span class="token punctuation">.</span>framework</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">junit<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span><span class="token class-name">ComparisonCompactor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">junit<span class="token punctuation">.</span>framework<span class="token punctuation">.</span></span><span class="token class-name">TestCase</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComparisonCompactorTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token string">&quot;a expected:&lt;[b]&gt; but was:&lt;[c]&gt;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>failure<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStartSame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ba&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;b[a]&gt; but was:&lt;b[c]&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testEndSame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;[a]b&gt; but was:&lt;[c]b&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;ab&gt; but was:&lt;ab&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testNoContextStartAndEndSame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;adc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;...[b]...&gt; but was:&lt;...[d]...&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStartAndEndContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;adc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;a[b]c&gt; but was:&lt;a[d]c&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testStartAndEndContextWithEllipses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;abcde&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abfde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;...b[c]d...&gt; but was:&lt;...b[f]d...&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorStartSameComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;ab[]&gt; but was:&lt;ab[c]&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorEndSameComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;bc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;[]...&gt; but was:&lt;[a]...&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorEndSameCompleteContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;bc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;[]bc&gt; but was:&lt;[a]bc&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorOverlappingMatches</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abbc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;...[]...&gt; but was:&lt;...[b]...&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorOverlappingMatchesContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abbc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;ab[]c&gt; but was:&lt;ab[b]c&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorOverlappingMatches2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;abcdde&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abcde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;...[d]...&gt; but was:&lt;...[]...&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorOverlappingMatches2Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;abcdde&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abcde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;...cd[d]e&gt; but was:&lt;...cd[]e&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorWithActualNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;a&gt; but was:&lt;null&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorWithActualNullContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;a&gt; but was:&lt;null&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorWithExpectedNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;null&gt; but was:&lt;a&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComparisonErrorWithExpectedNullContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;null&gt; but was:&lt;a&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBug609972</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> failure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;S&amp;P500&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;expected:&lt;[S&amp;P50]0&gt; but was:&lt;[]0&gt;&quot;</span><span class="token punctuation">,</span> failure<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>위 테스트 케이스로 ComparisionCompactor 모듈에 대한 코드 커버리지 분석을 수행했더니 100%가 나왔다. 테스트 케이스가 모든 행, 모든 if 문, 모든 for 문을 실행한다는 의미다.</p><p>다음은 ComparisonCompactor 모듈이다.</p><div class="language-java"><pre><code><span class="token keyword">package</span> <span class="token namespace">junit<span class="token punctuation">.</span>framework</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComparisonCompactor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ELLIPSIS <span class="token operator">=</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DELTA_END <span class="token operator">=</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DELTA_START <span class="token operator">=</span> <span class="token string">&quot;[&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> fContextLength<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> fExpected<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> fActual<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> fPrefix<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> fSuffix<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token keyword">int</span> contextLength<span class="token punctuation">,</span> <span class="token class-name">String</span> expected<span class="token punctuation">,</span> <span class="token class-name">String</span> actual<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fContextLength <span class="token operator">=</span> contextLength<span class="token punctuation">;</span>
        fExpected <span class="token operator">=</span> expected<span class="token punctuation">;</span>
        fActual <span class="token operator">=</span> actual<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fExpected <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> fActual <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">areStringsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> fExpected<span class="token punctuation">,</span> fActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> expected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>fExpected<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> actual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>fActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> DELTA_START <span class="token operator">+</span> source<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>fPrefix<span class="token punctuation">,</span> source<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> fSuffix <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> DELTA_END<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fPrefix <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token function">computeCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fSuffix <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> result <span class="token operator">+</span> <span class="token function">computeCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fPrefix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fActual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> fPrefix <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> fPrefix<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>fPrefix<span class="token punctuation">)</span> <span class="token operator">!=</span> fActual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>fPrefix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> expectedSuffix <span class="token operator">=</span> fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> actualSuffix <span class="token operator">=</span> fActual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> actualSuffix <span class="token operator">&gt;=</span> fPrefix <span class="token operator">&amp;&amp;</span> expectedSuffix <span class="token operator">&gt;=</span> fPrefix<span class="token punctuation">;</span> actualSuffix<span class="token operator">--</span><span class="token punctuation">,</span> expectedSuffix<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>expectedSuffix<span class="token punctuation">)</span> <span class="token operator">!=</span> fActual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>actualSuffix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        fSuffix <span class="token operator">=</span> fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> expectedSuffix<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">computeCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>fPrefix <span class="token operator">&gt;</span> fContextLength <span class="token operator">?</span> ELLIPSIS <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> fExpected<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> fPrefix <span class="token operator">-</span> fContextLength<span class="token punctuation">)</span><span class="token punctuation">,</span> fPrefix<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">computeCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> fSuffix <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> fContextLength<span class="token punctuation">,</span> fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> fExpected<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> fSuffix <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> fSuffix <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> fExpected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> fContextLength <span class="token operator">?</span> ELLIPSIS <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">areStringsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fExpected<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>fActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>긴 표현식 몇 개와 이상한 +1 등이 눈에 띄지만, 전반적으로 상당히 훌룡한 모듈이다. 몇가지를 개선해보도록 하겠다.</p><h3 id="접두어-제거" tabindex="-1">접두어 제거 <a class="header-anchor" href="#접두어-제거" aria-hidden="true">#</a></h3><p>가장 먼저 눈에 거슬리는 부분은 멤버 변수 앞에 붙인 접두어 f다. 이처럼 변수 이름에 범위를 명시할 필요가 없다. 이런 중복되는 정보인 f는 제거할 필요가 있다.</p><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token keyword">int</span> contextLength<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> expected<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> actual<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> prefix<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> suffix<span class="token punctuation">;</span>
</code></pre></div><h3 id="조건문-캡슐화" tabindex="-1">조건문 캡슐화 <a class="header-anchor" href="#조건문-캡슐화" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token comment">// 개선전</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>expected <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> actual <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">areStringsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> expected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> actual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 개선후</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldNotCompact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> expected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> actual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">shouldNotCompact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> expected <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> actual <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">areStringsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="명확한-의미의-단어를-사용해라" tabindex="-1">명확한 의미의 단어를 사용해라 <a class="header-anchor" href="#명확한-의미의-단어를-사용해라" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token class-name">String</span> compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="부정문보다는-긍정문을-사용하자" tabindex="-1">부정문보다는 긍정문을 사용하자 <a class="header-anchor" href="#부정문보다는-긍정문을-사용하자" aria-hidden="true">#</a></h3><p>부정문은 긍정문보다 이해하기 어렵다.</p><div class="language-java"><pre><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">canBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> compactExpected<span class="token punctuation">,</span> compactActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">canBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> expected <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> actual <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">areStringsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="함수를-분리해라" tabindex="-1">함수를 분리해라 <a class="header-anchor" href="#함수를-분리해라" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> compactExpected<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> compactActual<span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">formatCompactedComparison</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">canBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">compactExpectedAndActual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> compactExpected<span class="token punctuation">,</span> compactActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token function">compactExpectedAndActual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="함수-사용은-일관적으로" tabindex="-1">함수 사용은 일관적으로 <a class="header-anchor" href="#함수-사용은-일관적으로" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token function">compactExpectedAndActual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prefixIndex <span class="token operator">=</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    suffixIndex <span class="token operator">=</span> <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> prefixIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> prefixIndex <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> prefixIndex<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixIndex<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixIndex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> prefixIndex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> expectedSuffix <span class="token operator">=</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> actualSuffix <span class="token operator">=</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> actualSuffix <span class="token operator">&gt;=</span> prefixIndex <span class="token operator">&amp;&amp;</span> expectedSuffix <span class="token operator">&gt;=</span> prefix<span class="token punctuation">;</span> actualSuffix<span class="token operator">--</span><span class="token punctuation">,</span> expectedSuffix<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>expectedSuffix<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>actualSuffix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> expectedSuffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="숨겨진-시간적인-결합" tabindex="-1">숨겨진 시간적인 결합 <a class="header-anchor" href="#숨겨진-시간적인-결합" aria-hidden="true">#</a></h3><p>findCommandSuffix는 findCommonPrefix가 prefixIndex를 계산한다는 사실에 의존한다. 만약 findCommonPrefix와 findCommonSuffix를 잘못도니 순서로 호출하면 고생좀 해야할 것이다. 그래서 시간 결합을 외부에 노출하고자 findCommonSuffix를 고쳐 prefixIndex를 인수로 넘겼다.</p><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token function">compactExpectedAndActual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prefixIndex <span class="token operator">=</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    suffixIndex <span class="token operator">=</span> <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span>prefixIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">findCommonSuffix</span><span class="token punctuation">(</span><span class="token keyword">int</span> prefixIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> expectedSuffix <span class="token operator">=</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> actualSuffix <span class="token operator">=</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> actualSuffix <span class="token operator">&gt;=</span> prefixIndex <span class="token operator">&amp;&amp;</span> expectedSuffix <span class="token operator">&gt;=</span> prefix<span class="token punctuation">;</span> actualSuffix<span class="token operator">--</span><span class="token punctuation">,</span> expectedSuffix<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>expectedSuffix<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>actualSuffix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> expectedSuffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="일관적인-방식" tabindex="-1">일관적인 방식 <a class="header-anchor" href="#일관적인-방식" aria-hidden="true">#</a></h3><p>함수 호출 순서는 확실히 정해지지만 prefixIndex가 필요한 이유는 설명하지 못한다. prefixIndex가 필요한 이유가 분명히 들어나지 않으므로 다른 프로그래머가 원래대로 돌려놓을 수도 있다.</p><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token function">compactExpectedAndActual</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactExpected <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> compactActual <span class="token operator">=</span> <span class="token function">compactString</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> expectedSuffix <span class="token operator">=</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> actualSuffix <span class="token operator">=</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> actualSuffix <span class="token operator">&gt;=</span> prefixIndex <span class="token operator">&amp;&amp;</span> expectedSuffix <span class="token operator">&gt;=</span> prefix<span class="token punctuation">;</span> actualSuffix<span class="token operator">--</span><span class="token punctuation">,</span> expectedSuffix<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>expectedSuffix<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>actualSuffix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    suffixIndex <span class="token operator">=</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> expectedSuffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> prefixIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> prefixIndex <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> prefixIndex<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixIndex<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixIndex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>다음으로 지저분한 PrefixAndSuffix 함수도 정리해보자.</p><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> suffixLength <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span>suffixLength<span class="token punctuation">)</span><span class="token punctuation">;</span> suffixLength<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">charFromEnd</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">charFromEnd</span><span class="token punctuation">(</span>actual<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    suffixIndex <span class="token operator">=</span> suffixLength<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">char</span> <span class="token function">charFromEnd</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span><span class="token keyword">int</span> suffixLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> suffixLength <span class="token operator">&lt;</span> prefixLength <span class="token operator">||</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength <span class="token operator">&lt;</span> prefixLength<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>코드가 훨씬 나아졌다. 코드를 고치고 나니까 suffixIndex가 실제로는 접미어 길이라는 사실이 드러난다. prefixIndex도 마찬가지로, 이 경우 index와 length가 동의어다. 실제로 suffixIndex는 0에서 시작하지 않는다. 1에서 시작하므로 진정한 길이가 아니다. computeCommonSuffix에 +1이 곳곳에 등장하는 이유가 여기에 있다.</p><div class="language-java"><pre><code><span class="token comment">// 중간 코드</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComparisonCompactor</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> suffixLength<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        suffixLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span>suffixLength<span class="token punctuation">)</span><span class="token punctuation">;</span> suffixLength<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">charFromEnd</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">charFromEnd</span><span class="token punctuation">(</span>actual<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">char</span> <span class="token function">charFromEnd</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span><span class="token keyword">int</span> suffixLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> suffixLength <span class="token operator">&lt;=</span> prefixLength <span class="token operator">||</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength <span class="token operator">&lt;=</span> prefixLength<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> DELTA_START <span class="token operator">+</span> source<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>prefixLength<span class="token punctuation">,</span> source<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength<span class="token punctuation">)</span> <span class="token operator">+</span> DELTA_END<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prefixLength <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token function">computeCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>suffixLength <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> result <span class="token operator">+</span> <span class="token function">computeCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">computeCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength <span class="token operator">+</span> contextLength<span class="token punctuation">,</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> expected<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength <span class="token operator">&lt;</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> contextLength <span class="token operator">?</span> ELLIPSIS <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>computeCommonSuffix에서 +1을 없애고 charFromEnd에 -1을 추가하고 suffixOverlapsPrefix에 &lt;=를 사용했다. 그 다음 suffixIndex를 suffixLength로 바꾸었다.</p><p>그런데 문제가 하나 있다. +1을 제거하는 중 compactString에서 다음 행을 발견했다.</p><div class="language-java"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>suffixLength <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p>suffixLength가 이제 1씩 감소했으므로 당연히 &gt; 연산자를 &gt;= 연산자로 고쳐야 마땅하다. 하지만 &gt;= 연산자는 말이 안되므로 그대로 &gt; 연산자가 맞다! 즉 원래 코드가 틀렸으며 필경 버그라는 말이다. 아니, 엄밀하게 버그는 아니다. 코드를 좀 더 분석해 보면 이제 if 문은 길이가 0인 접미어를 걸러내 첨부하지 않는다. 원래 코드는 언제나 suffixIndex가 1 이상이었으므로 if 문이 무의미 했다.</p><p>필요없는 if문을 제거한 후, compactString 구조를 다듬어보자.</p><div class="language-java"><pre><code><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">compactString</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
					<span class="token function">computeCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">D</span>
					ELTA_START <span class="token operator">+</span>
					source<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>prefixLength<span class="token punctuation">,</span> source<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength<span class="token punctuation">)</span> <span class="token operator">+</span>
					DELTA_END <span class="token operator">+</span>
					<span class="token function">computeCommonSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="최종코드" tabindex="-1">최종코드 <a class="header-anchor" href="#최종코드" aria-hidden="true">#</a></h3><div class="language-java"><pre><code><span class="token keyword">package</span> <span class="token namespace">junit<span class="token punctuation">.</span>framework</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComparisonCompactor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ELLIPSIS <span class="token operator">=</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DELTA_END <span class="token operator">=</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DELTA_START <span class="token operator">=</span> <span class="token string">&quot;[&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> contextLength<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> expected<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> actual<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> prefixLength<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> suffixLength<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ComparisonCompactor</span><span class="token punctuation">(</span><span class="token keyword">int</span> contextLength<span class="token punctuation">,</span> <span class="token class-name">String</span> expected<span class="token punctuation">,</span> <span class="token class-name">String</span> actual<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contextLength <span class="token operator">=</span> contextLength<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expected <span class="token operator">=</span> expected<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actual <span class="token operator">=</span> actual<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">formatCompactedComparison</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> compactExpected <span class="token operator">=</span> expected<span class="token punctuation">;</span>
        <span class="token class-name">String</span> compactactual <span class="token operator">=</span> actual<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            compactExpected <span class="token operator">=</span> <span class="token function">comapct</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
            compactActual <span class="token operator">=</span> <span class="token function">comapct</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> compactExpected<span class="token punctuation">,</span> compactActual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">shouldBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">shouldNotBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">shouldNotBeCompacted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> expected <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> actual <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> expected<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefixAndSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        suffixLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span>suffixLength<span class="token punctuation">)</span><span class="token punctuation">;</span> suffixLength<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">charFromEnd</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">charFromEnd</span><span class="token punctuation">(</span>actual<span class="token punctuation">,</span> suffixLength<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">suffixOverlapsPrefix</span><span class="token punctuation">(</span><span class="token keyword">int</span> suffixLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> suffixLength <span class="token operator">&lt;=</span> prefixLength <span class="token operator">||</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> suffixLength <span class="token operator">&lt;=</span> prefixLength<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">findCommonPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> prefixIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> end <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> actual<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> prefixLength <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> prefixLength<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixLength<span class="token punctuation">)</span> <span class="token operator">!=</span> actual<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>prefixLength<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">startingEllipsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">startingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>DELTA_START<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">delta</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>DELTA_END<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">endingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">endingEllipsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">startingEllipsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        prefixIndex <span class="token operator">&gt;</span> contextLength <span class="token operator">?</span> ELLIPSIS <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">startingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> contextStart <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> prefixLength <span class="token operator">=</span> contextLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> contextEnd <span class="token operator">=</span> prefixLength<span class="token punctuation">;</span>
        <span class="token keyword">return</span> expected<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>contextStart<span class="token punctuation">,</span> contextEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> deltaStart <span class="token operator">=</span> prefixLength<span class="token punctuation">;</span>
        <span class="token keyword">int</span> deltaend <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> suffixLength<span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>deltaStart<span class="token punctuation">,</span> deltaEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">endingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> contextStart <span class="token operator">=</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> suffixLength<span class="token punctuation">;</span>
        <span class="token keyword">int</span> contextEnd <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>contextStart <span class="token operator">+</span> contextLength<span class="token punctuation">,</span> expected<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> expected<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>contextStart<span class="token punctuation">,</span> contextEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">endingEllipsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>suffixLength <span class="token operator">&gt;</span> contextLength <span class="token operator">?</span> ELLIPSIS <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>코드를 주의 깊게 살펴보면 초반에 내렸던 결정을 일부 번복했다는 사실을 알 수 있다. 예를 들면 처음 추출했떤 메서드 몇개를 다시 formatCompactedComparison에다 도로 집어넣었다. 또한 shouldNotBeCompacted 조건도 원래대로 되돌렸다. 코드를 리팩터링 하다 보면 흔히 원래 했던 변경을 되돌리는 경우가 흔하다. 리팩터링은 코드가 어느 수준에 이를 때까지 수많은 시행착오를 반복하는 작업이기 때문이다.</p></div></div><footer class="page-footer" data-v-338937e7 data-v-4b207065><div class="edit" data-v-4b207065><div class="edit-link" data-v-4b207065 data-v-76b066b8><!----></div></div><div class="updated" data-v-4b207065><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"clean_code_chapter_1.md\":\"45843a24\",\"clean_code_chapter_10.md\":\"f12c0f48\",\"clean_code_chapter_11.md\":\"b8b05c0d\",\"clean_code_chapter_12.md\":\"d1cb317e\",\"clean_code_chapter_13.md\":\"1b27a516\",\"clean_code_chapter_15.md\":\"e0b0ed4a\",\"clean_code_chapter_2.md\":\"4f5f6566\",\"clean_code_chapter_3.md\":\"d30ff7b0\",\"clean_code_chapter_4.md\":\"a81dffc4\",\"clean_code_chapter_5.md\":\"c67c3350\",\"clean_code_chapter_6.md\":\"5286d8d0\",\"clean_code_chapter_7.md\":\"930b7dca\",\"clean_code_chapter_8.md\":\"f42a0052\",\"clean_code_chapter_9.md\":\"3efaa12f\",\"clean_code_index.md\":\"3807b6bf\",\"readme.md\":\"ccd03e62\",\"index.md\":\"855344a5\"}")</script>
    <script type="module" async src="/2022-book-study/assets/app.7b36c640.js"></script>
    
  </body>
</html>